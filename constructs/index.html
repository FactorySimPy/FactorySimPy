<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://factorysimpy.github.io/FactorySimPy/constructs/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Constructs for Modeling - FactorySimPy</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Constructs for Modeling";
        var mkdocs_page_input_path = "constructs.md";
        var mkdocs_page_url = "/FactorySimPy/constructs/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> FactorySimPy
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting_started/">Getting Started</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">SYSTEM DESCRIPTION</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../basic_components/">Basic Components</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/">Examples</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Other features</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../monitoring/">Monitoring and Measurement</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Constructs for Modeling</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../extending_components/">Extending Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../interrupts/">Modeling interrupts</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../RTsimulation/">Enabling real-time simulation</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">REFERENCE</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../extendedresources/">Supporting classes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api_ref_main_page_2/">API Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../authors/">Authors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../license/">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">FactorySimPy</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">SYSTEM DESCRIPTION</li>
          <li class="breadcrumb-item">Other features</li>
      <li class="breadcrumb-item active">Constructs for Modeling</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/FactorySimPy/FactorySimPy/edit/master/docs/constructs.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="constructs">Constructs<a class="headerlink" href="#constructs" title="Permanent link">&para;</a></h3>
<hr style="height:2px;border:none;color:blue; background-color:grey;" />

<p><strong>About</strong></p>
<p>Constructs in FactorySimPy are utility functions that help you quickly build common network topologies of nodes and edges, such as chains of machines with buffers, or more complex arrangements. They automate the instantiation and connection of nodes (like sources, machines, sinks) and edges (like buffers), reducing boilerplate code and making your simulation scripts more concise and less error-prone.</p>
<p><strong>Key Functions</strong></p>
<ul>
<li><code>connect_chain</code>: Creates a chain of nodes (e.g., machines) and  edges (e.g., buffers).</li>
<li><code>connect_chain_with_source_sink</code>: Extends <code>connect_chain</code> by adding a source node at the beginning and a sink node at the end.</li>
<li><code>connect_nodes_with_buffers</code>: Connects a list of machines and buffers in sequence, optionally including a source and sink.</li>
</ul>
<p><strong>Usage Example</strong></p>
<p>Suppose you want to create a simple production line:<br />
<code>Source → Buffer1 → Machine1 → Buffer2 → Machine2 → Buffer3 → Sink</code></p>
<p>You can do this easily with constructs:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">simpy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">factorysimpy.nodes.machine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Machine</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">factorysimpy.edges.buffer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Buffer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">factorysimpy.nodes.source</span><span class="w"> </span><span class="kn">import</span> <span class="n">Source</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">factorysimpy.nodes.sink</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sink</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">factorysimpy.constructs.chain</span><span class="w"> </span><span class="kn">import</span> <span class="n">connect_chain_with_source_sink</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">simpy</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>

<span class="c1"># Define parameters for each component</span>
<span class="n">source_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;inter_arrival_time&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;blocking&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="n">node_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;work_capacity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;processing_delay&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s2">&quot;in_edge_selection&quot;</span><span class="p">:</span> <span class="s2">&quot;FIRST&quot;</span><span class="p">,</span> <span class="s2">&quot;out_edge_selection&quot;</span><span class="p">:</span> <span class="s2">&quot;FIRST&quot;</span><span class="p">}</span>
<span class="n">edge_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;store_capacity&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;delay&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;FIFO&quot;</span><span class="p">}</span>
<span class="n">sink_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># Create a chain with 2 machines, 3 buffers, a source, and a sink</span>
<span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">sink</span> <span class="o">=</span> <span class="n">connect_chain_with_source_sink</span><span class="p">(</span>
    <span class="n">env</span><span class="p">,</span>
    <span class="n">count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">node_cls</span><span class="o">=</span><span class="n">Machine</span><span class="p">,</span>
    <span class="n">edge_cls</span><span class="o">=</span><span class="n">Buffer</span><span class="p">,</span>
    <span class="n">source_cls</span><span class="o">=</span><span class="n">Source</span><span class="p">,</span>
    <span class="n">sink_cls</span><span class="o">=</span><span class="n">Sink</span><span class="p">,</span>
    <span class="n">node_kwargs</span><span class="o">=</span><span class="n">node_kwargs</span><span class="p">,</span>
    <span class="n">edge_kwargs</span><span class="o">=</span><span class="n">edge_kwargs</span><span class="p">,</span>
    <span class="n">source_kwargs</span><span class="o">=</span><span class="n">source_kwargs</span><span class="p">,</span>
    <span class="n">sink_kwargs</span><span class="o">=</span><span class="n">sink_kwargs</span>
<span class="p">)</span>

<span class="n">machines</span><span class="p">,</span> <span class="n">buffers</span> <span class="o">=</span> <span class="n">connect_nodes_with_buffers</span><span class="p">(</span><span class="n">machines</span><span class="p">,</span> <span class="n">buffers</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">sink</span><span class="p">)</span>

<span class="c1"># Now, nodes and edges are connected in order and connected:</span>
<span class="c1"># src -&gt; edges[0] -&gt; nodes[1] -&gt; edges[1] -&gt; nodes[2] -&gt; edges[2] -&gt; sink</span>

<span class="n">env</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>
<p><strong>Custom Connections</strong></p>
<p>If you want to connect a list of machines and buffers you created yourself, use <code>connect_nodes_with_buffers</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">machines</span> <span class="o">=</span> <span class="p">[</span><span class="n">Machine</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;M</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">node_kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
<span class="n">buffers</span> <span class="o">=</span> <span class="p">[</span><span class="n">Buffer</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;BUF</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">edge_kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;SRC&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">source_kwargs</span><span class="p">)</span>
<span class="n">sink</span> <span class="o">=</span> <span class="n">Sink</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;SINK&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">sink_kwargs</span><span class="p">)</span>

<span class="c1"># Connect: src -&gt; BUF0 -&gt; M0 -&gt; BUF1 -&gt; M1 -&gt; BUF2 -&gt; sink</span>
<span class="n">machines</span><span class="p">,</span> <span class="n">buffers</span> <span class="o">=</span> <span class="n">connect_nodes_with_buffers</span><span class="p">(</span><span class="n">machines</span><span class="p">,</span> <span class="n">buffers</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">sink</span><span class="p">)</span>
</code></pre></div>
<p><strong>Example</strong></p>
<ul>
<li><a href="../examples/#example-with-constructs">A simple example with constructs</a></li>
</ul>
<hr style="height:4px;border:none;color:blue; background-color:grey;" />
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../monitoring/" class="btn btn-neutral float-left" title="Monitoring and Measurement"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../extending_components/" class="btn btn-neutral float-right" title="Extending Components">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/FactorySimPy/FactorySimPy" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../monitoring/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../extending_components/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
